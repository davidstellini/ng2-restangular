Updated with a five minute fix to use Promises instead of observables. Promises are forced to complete so that .then() executes.
